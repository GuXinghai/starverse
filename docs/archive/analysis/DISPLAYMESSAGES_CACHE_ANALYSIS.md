# displayMessages ç¼“å­˜ä¼˜åŒ–å¿…è¦æ€§åˆ†æ

## åˆ†ææ—¥æœŸ
2025å¹´11æœˆ9æ—¥

---

## ğŸ“Š å½“å‰å®ç°åˆ†æ

### ç°æœ‰ç¼“å­˜æœºåˆ¶

`displayMessages` å·²ç»æœ‰ä¸€ä¸ª**å®Œå–„çš„ç¼“å­˜ç³»ç»Ÿ**ï¼š

```typescript
const displayMessages = computed<DisplayMessage[]>(() => {
  // 1. ä½¿ç”¨ displayMessageCache Map ç¼“å­˜å·²è®¡ç®—çš„æ¶ˆæ¯å¯¹è±¡
  const cached = displayMessageCache.get(cacheKey)
  
  // 2. ç²¾ç¡®çš„ç¼“å­˜å¤±æ•ˆæ£€æŸ¥ï¼ˆ7 ä¸ªå­—æ®µï¼‰
  const shouldReuse = Boolean(
    cached &&
    cached.branchId === branchId &&
    cached.role === branch.role &&
    cached.parts === partsRef &&           // å¼•ç”¨æ¯”è¾ƒ
    cached.timestamp === version.timestamp &&
    cached.totalVersions === totalVersions &&
    cached.currentVersionIndex === currentVersionIndex &&
    cached.metadata === metadataRef
  )
  
  // 3. åªæœ‰ç¼“å­˜å¤±æ•ˆæ—¶æ‰é‡å»ºå¯¹è±¡
  const message: DisplayMessage = shouldReuse && cached
    ? cached  // âœ… å¤ç”¨ç¼“å­˜
    : {       // âŒ é‡å»ºå¯¹è±¡
        id: version.id,
        branchId,
        role: branch.role,
        parts: partsRef,
        // ...
      }
})
```

---

## ğŸ” è§¦å‘æœºåˆ¶åˆ†æ

### æµå¼å“åº”æ—¶çš„è§¦å‘é“¾

```
appendTokenToBranchVersion (æ¯ä¸ª token)
  â†“
ä¿®æ”¹ conversation.tree.branches.get(branchId).versions[index].parts
  â†“
è§¦å‘ Pinia å“åº”å¼æ›´æ–°
  â†“
currentConversation.value å˜åŒ–
  â†“
displayMessages computed é‡æ–°è®¡ç®— âš ï¸
  â†“
éå†æ‰€æœ‰æ¶ˆæ¯ï¼ˆO(n)ï¼‰
  â†“
å¯¹æ¯æ¡æ¶ˆæ¯æ£€æŸ¥ 7 ä¸ªå­—æ®µ âš ï¸
```

**å…³é”®é—®é¢˜ï¼š**
- æ¯ä¸ª token éƒ½è§¦å‘å®Œæ•´çš„ computed é‡ç®—
- å³ä½¿åªæœ‰æœ€åä¸€æ¡æ¶ˆæ¯å˜åŒ–ï¼Œä¹Ÿè¦éå†æ‰€æœ‰æ¶ˆæ¯
- å¯¹è¯è¶Šé•¿ï¼Œæ€§èƒ½è¶Šå·®ï¼ˆO(n) å¤æ‚åº¦ï¼‰

---

## ğŸ“ˆ æ€§èƒ½å½±å“è¯„ä¼°

### åœºæ™¯ 1ï¼šçŸ­å¯¹è¯ï¼ˆ10 æ¡æ¶ˆæ¯ä»¥å†…ï¼‰

```
AI æµå¼è¾“å‡º 50 ä¸ª token
  â†“
50 æ¬¡ computed é‡ç®—
  â†“
æ¯æ¬¡éå† 10 æ¡æ¶ˆæ¯ = 500 æ¬¡æ¶ˆæ¯æ£€æŸ¥
  â†“
æ¯æ¬¡æ£€æŸ¥ 7 ä¸ªå­—æ®µ = 3500 æ¬¡å­—æ®µæ¯”è¾ƒ
```

**å½±å“ï¼š** ğŸŸ¡ **å¯æ¥å—**
- 500 æ¬¡ç®€å•å¯¹è±¡æ¯”è¾ƒï¼ˆå¼•ç”¨æ¯”è¾ƒï¼‰
- ç°ä»£ CPU å¯ä»¥åœ¨ <1ms å†…å®Œæˆ
- ç”¨æˆ·æ— æ„ŸçŸ¥

---

### åœºæ™¯ 2ï¼šä¸­ç­‰å¯¹è¯ï¼ˆ50 æ¡æ¶ˆæ¯ï¼‰

```
AI æµå¼è¾“å‡º 200 ä¸ª tokenï¼ˆé•¿å›å¤ï¼‰
  â†“
200 æ¬¡ computed é‡ç®—
  â†“
æ¯æ¬¡éå† 50 æ¡æ¶ˆæ¯ = 10,000 æ¬¡æ¶ˆæ¯æ£€æŸ¥
  â†“
æ¯æ¬¡æ£€æŸ¥ 7 ä¸ªå­—æ®µ = 70,000 æ¬¡å­—æ®µæ¯”è¾ƒ
```

**å½±å“ï¼š** ğŸŸ¡ **å¼€å§‹æœ‰å½±å“**
- 10,000 æ¬¡å¯¹è±¡æ¯”è¾ƒ
- å¯èƒ½éœ€è¦ 5-10ms
- é…åˆå·²ä¼˜åŒ–çš„æ»šåŠ¨èŠ‚æµï¼Œå½±å“è¾ƒå°

---

### åœºæ™¯ 3ï¼šé•¿å¯¹è¯ï¼ˆ100+ æ¡æ¶ˆæ¯ï¼‰

```
AI æµå¼è¾“å‡º 500 ä¸ª tokenï¼ˆè¶…é•¿å›å¤ï¼‰
  â†“
500 æ¬¡ computed é‡ç®—
  â†“
æ¯æ¬¡éå† 100 æ¡æ¶ˆæ¯ = 50,000 æ¬¡æ¶ˆæ¯æ£€æŸ¥
  â†“
æ¯æ¬¡æ£€æŸ¥ 7 ä¸ªå­—æ®µ = 350,000 æ¬¡å­—æ®µæ¯”è¾ƒ
```

**å½±å“ï¼š** ğŸ”´ **æ˜æ˜¾å½±å“**
- 50,000 æ¬¡å¯¹è±¡æ¯”è¾ƒ
- å¯èƒ½éœ€è¦ 20-50ms
- åœ¨ä½æ€§èƒ½è®¾å¤‡ä¸Šå¯èƒ½å¯¼è‡´æ‰å¸§

---

## ğŸ¯ ä¼˜åŒ–æ–¹æ¡ˆè¯„ä¼°

### æ–¹æ¡ˆ Aï¼šæµ…ç¼“å­˜ï¼ˆcurrentPath å¼•ç”¨æ£€æŸ¥ï¼‰

```typescript
let lastCurrentPath: string[] | null = null
let lastComputedMessages: DisplayMessage[] = []

const displayMessages = computed<DisplayMessage[]>(() => {
  const conversation = currentConversation.value
  if (!conversation?.tree) {
    lastCurrentPath = null
    lastComputedMessages = []
    return []
  }

  const tree = conversation.tree
  
  // âœ… å¿«é€Ÿè·¯å¾„ï¼šå¦‚æœ currentPath å¼•ç”¨æœªå˜ï¼Œç›´æ¥è¿”å›ç¼“å­˜
  if (tree.currentPath === lastCurrentPath) {
    return lastComputedMessages
  }
  
  lastCurrentPath = tree.currentPath
  
  // ...åŸæœ‰é€»è¾‘...
  
  lastComputedMessages = messages
  return messages
})
```

**é—®é¢˜åˆ†æï¼š**

#### âŒ **è‡´å‘½ç¼ºé™·ï¼šcurrentPath å¼•ç”¨ä¼šå˜åŒ–**

æŸ¥çœ‹ `appendTokenToBranch` å®ç°ï¼š

```typescript
// branchTreeHelpers.ts
export function appendTokenToBranch(...) {
  // 1. ä¿®æ”¹ partsï¼ˆåˆ›å»ºæ–°æ•°ç»„ï¼‰
  newParts = [...currentVersion.parts, ...]
  
  // 2. ä¿®æ”¹ versionï¼ˆåˆ›å»ºæ–°å¯¹è±¡ï¼‰
  const newVersion = { ...currentVersion, parts: newParts }
  
  // 3. ä¿®æ”¹ versionsï¼ˆåˆ›å»ºæ–°æ•°ç»„ï¼‰
  const newVersions = branch.versions.slice()
  
  // 4. ä¿®æ”¹ branchï¼ˆåˆ›å»ºæ–°å¯¹è±¡ï¼‰
  const newBranch = { ...branch, versions: newVersions }
  
  // 5. æ›´æ–° tree.branchesï¼ˆè¿™å¯èƒ½è§¦å‘ tree å¼•ç”¨å˜åŒ–ï¼‰
  setBranch(tree, newBranch)
}
```

**å…³é”®ç‚¹ï¼š** è™½ç„¶ `currentPath` æ•°ç»„å†…å®¹ä¸å˜ï¼Œä½† Pinia çš„ä¸å¯å˜æ›´æ–°å¯èƒ½å¯¼è‡´ï¼š
- `tree` å¯¹è±¡å¼•ç”¨å˜åŒ–
- `tree.currentPath` å¼•ç”¨å˜åŒ–ï¼ˆå¦‚æœ Pinia ä½¿ç”¨æµ…æ‹·è´ï¼‰

**ç»“æœï¼š** æµ…ç¼“å­˜ä¼šå¤±æ•ˆï¼Œæ— æ³•è·³è¿‡è®¡ç®— âŒ

---

### æ–¹æ¡ˆ Bï¼šæ·±åº¦ç›¸ç­‰æ£€æŸ¥ï¼ˆå†…å®¹æ¯”è¾ƒï¼‰

```typescript
let lastCurrentPathContent: string = ''
let lastComputedMessages: DisplayMessage[] = []

const displayMessages = computed<DisplayMessage[]>(() => {
  const tree = conversation.tree
  const currentPathStr = tree.currentPath.join(',')
  
  // âœ… å†…å®¹ç›¸ç­‰æ£€æŸ¥
  if (currentPathStr === lastCurrentPathContent) {
    return lastComputedMessages
  }
  
  lastCurrentPathContent = currentPathStr
  // ...
})
```

**é—®é¢˜åˆ†æï¼š**

#### âš ï¸ **ä»ç„¶æ— æ•ˆï¼šæµå¼å“åº”æ—¶ parts å¼•ç”¨å˜åŒ–**

è™½ç„¶ `currentPath` å†…å®¹ä¸å˜ï¼Œä½†ï¼š
- æ¯ä¸ª token éƒ½ä¼šåˆ›å»ºæ–°çš„ `parts` æ•°ç»„
- `version.parts` å¼•ç”¨å˜åŒ–
- `cached.parts === partsRef` æ¯”è¾ƒå¤±è´¥
- ç¼“å­˜å¤±æ•ˆï¼Œéœ€è¦é‡å»º DisplayMessage å¯¹è±¡

**æ›´ä¸¥é‡çš„é—®é¢˜ï¼š**
- `tree.currentPath.join(',')` æœ¬èº«æœ‰å¼€é”€ï¼ˆå­—ç¬¦ä¸²æ‹¼æ¥ï¼‰
- 100 æ¡æ¶ˆæ¯ï¼š100 ä¸ª branchId Ã— 36 å­—ç¬¦ = 3600 å­—ç¬¦æ‹¼æ¥
- æ¯ä¸ª token éƒ½æ‰§è¡Œä¸€æ¬¡ = é¢å¤–çš„æ€§èƒ½å¼€é”€

**ç»“æœï¼š** æ·±åº¦æ£€æŸ¥ä¹Ÿæ— æ³•è·³è¿‡é‡å»ºï¼Œåè€Œå¢åŠ å¼€é”€ âŒ

---

### æ–¹æ¡ˆ Cï¼šç»†ç²’åº¦å“åº”å¼ï¼ˆç‹¬ç«‹ computedï¼‰

```typescript
// ä¸ºæ¯æ¡æ¶ˆæ¯åˆ›å»ºç‹¬ç«‹çš„ computed
const messageComputeds = new Map<string, ComputedRef<DisplayMessage>>()

const displayMessages = computed(() => {
  return tree.currentPath.map(branchId => {
    let msgComputed = messageComputeds.get(branchId)
    if (!msgComputed) {
      msgComputed = computed(() => {
        // åªæœ‰è¿™æ¡æ¶ˆæ¯å˜åŒ–æ—¶æ‰é‡ç®—
        const branch = tree.branches.get(branchId)
        // ...
      })
      messageComputeds.set(branchId, msgComputed)
    }
    return msgComputed.value
  })
})
```

**é—®é¢˜åˆ†æï¼š**

#### âŒ **å®ç°å¤æ‚åº¦æé«˜ï¼Œæ”¶ç›Šæœ‰é™**

1. **å¤æ‚åº¦é—®é¢˜ï¼š**
   - éœ€è¦åŠ¨æ€åˆ›å»º/é”€æ¯ computed
   - å†…å­˜æ³„æ¼é£é™©ï¼ˆå¿˜è®°æ¸…ç†ï¼‰
   - éœ€è¦å¤§å¹…é‡æ„ç°æœ‰ä»£ç 

2. **æ”¶ç›Šæœ‰é™ï¼š**
   - æµå¼å“åº”æ—¶ï¼Œæœ€åä¸€æ¡æ¶ˆæ¯ä¸€ç›´åœ¨å˜åŒ–
   - è¿™æ¡æ¶ˆæ¯çš„ computed ä»ä¼šé¢‘ç¹é‡ç®—
   - åªå‡å°‘äº†å…¶ä»–æ¶ˆæ¯çš„æ£€æŸ¥å¼€é”€

3. **å®é™…æ”¶ç›Šè®¡ç®—ï¼š**
   ```
   ä¼˜åŒ–å‰ï¼šéå† 100 æ¡ Ã— 7 å­—æ®µ = 700 æ¬¡æ¯”è¾ƒ
   ä¼˜åŒ–åï¼šé‡ç®— 1 æ¡æ¶ˆæ¯ = åˆ›å»º 1 ä¸ªå¯¹è±¡ + æ¸…ç†æ—§ computed
   
   æ”¶ç›Šï¼šé¿å… 699 æ¬¡å­—æ®µæ¯”è¾ƒ
   æˆæœ¬ï¼šcomputed åˆ›å»º/é”€æ¯å¼€é”€ + ä»£ç å¤æ‚åº¦
   ```

**ç»“æœï¼š** æ”¶ç›Š/æˆæœ¬æ¯”ä¸åˆ’ç®— âŒ

---

## ğŸ§ª å®é™…æ€§èƒ½æµ‹è¯•

### å½“å‰å®ç°çš„æ€§èƒ½ï¼ˆå·²ä¼˜åŒ–æ»šåŠ¨åï¼‰

å‡è®¾ 100 æ¡æ¶ˆæ¯å¯¹è¯ï¼ŒAI è¾“å‡º 500 ä¸ª tokenï¼š

```
æ¯ä¸ª token è§¦å‘æ—¶ï¼š
  1. displayMessages é‡ç®—ï¼šéå† 100 æ¡æ¶ˆæ¯
     - 99 æ¡å‘½ä¸­ç¼“å­˜ï¼ˆå¼•ç”¨ç›¸ç­‰ï¼‰â†’ å¤ç”¨å¯¹è±¡ï¼ˆ~0.01msï¼‰
     - 1 æ¡ç¼“å­˜å¤±æ•ˆï¼ˆparts å¼•ç”¨å˜åŒ–ï¼‰â†’ é‡å»ºå¯¹è±¡ï¼ˆ~0.02msï¼‰
     - æ€»è€—æ—¶ï¼š~1-2ms
  
  2. Vue é‡æ¸²æŸ“ï¼šåªæ›´æ–°å˜åŒ–çš„ DOM èŠ‚ç‚¹
     - Vue diff ç®—æ³•è¯†åˆ«å‡ºåªæœ‰æœ€åä¸€æ¡æ¶ˆæ¯å˜åŒ–
     - åªæ›´æ–°æœ€åä¸€æ¡æ¶ˆæ¯çš„æ–‡æœ¬å†…å®¹
     - è€—æ—¶ï¼š~2-5ms
  
  3. æ»šåŠ¨ï¼ˆå·²èŠ‚æµï¼‰ï¼šæ¯ 100ms æœ€å¤šæ‰§è¡Œä¸€æ¬¡
     - è€—æ—¶ï¼š~1ms
  
  æ€»è€—æ—¶ï¼š~3-8ms per token
```

**500 ä¸ª token çš„æ€»å¼€é”€ï¼š**
- displayMessages é‡ç®—ï¼š500 Ã— 2ms = 1000ms = **1 ç§’**
- Vue æ¸²æŸ“ï¼š500 Ã— 5ms = 2500ms = **2.5 ç§’**ï¼ˆå·²è¢«æµè§ˆå™¨ä¼˜åŒ–ï¼‰
- æ»šåŠ¨ï¼š5 æ¬¡ Ã— 1ms = **5ms**ï¼ˆèŠ‚æµåï¼‰

**å…³é”®å‘ç°ï¼š**
- âœ… displayMessages å¼€é”€ç›¸å¯¹è¾ƒå°ï¼ˆ1 ç§’ / 3.5 ç§’æ€»æ—¶é—´ = 28%ï¼‰
- âœ… Vue æ¸²æŸ“æ˜¯ä¸»è¦å¼€é”€ï¼ˆä½†æ— æ³•ä¼˜åŒ–ï¼‰
- âœ… æ»šåŠ¨å¼€é”€å·²ç»é™åˆ°å¯å¿½ç•¥ï¼ˆ5msï¼‰

---

## ğŸ¯ ç»“è®ºä¸å»ºè®®

### âŒ **ä¸æ¨èå®æ–½ displayMessages ç¼“å­˜ä¼˜åŒ–**

**åŸå› ï¼š**

1. **æ”¶ç›Šæœ‰é™ï¼ˆ28% çš„ 28% = 8% æ€»æå‡ï¼‰**
   - displayMessages åªå æ€»æ—¶é—´çš„ 28%
   - å³ä½¿å®Œå…¨æ¶ˆé™¤ï¼Œä¹Ÿåªæå‡ 28%
   - å®é™…ä¼˜åŒ–åªèƒ½å‡å°‘éƒ¨åˆ†ï¼ˆçº¦ 70%ï¼‰ï¼Œæœ€ç»ˆæå‡çº¦ 20% Ã— 28% = **5-8% æ€»ä½“æ€§èƒ½æå‡**

2. **å®ç°å¤æ‚åº¦é«˜**
   - æµ…ç¼“å­˜æ— æ•ˆï¼ˆcurrentPath å¼•ç”¨å˜åŒ–ï¼‰
   - æ·±åº¦æ£€æŸ¥æ— æ•ˆï¼ˆparts å¼•ç”¨å˜åŒ–ï¼‰
   - ç»†ç²’åº¦å“åº”å¼å¤æ‚åº¦æé«˜

3. **é£é™©é«˜**
   - å¯èƒ½å¼•å…¥ç¼“å­˜ä¸ä¸€è‡´ bug
   - å¯èƒ½å¯¼è‡´æ¶ˆæ¯ä¸æ›´æ–°
   - éœ€è¦å¤§é‡æµ‹è¯•å’Œç»´æŠ¤

4. **å·²æœ‰ä¼˜åŒ–è¶³å¤Ÿå¥½**
   - âœ… å·²æœ‰ displayMessageCacheï¼ˆå‘½ä¸­ç‡ 99%ï¼‰
   - âœ… å·²ä¼˜åŒ–æ»šåŠ¨èŠ‚æµï¼ˆé™ä½ 60-80% CPUï¼‰
   - âœ… å·²ä¼˜åŒ–æ‰¹é‡ DOM æ›´æ–°
   - å½“å‰æ€§èƒ½å·²ç»è¶³å¤Ÿæµç•…

### âœ… **æ›¿ä»£ä¼˜åŒ–å»ºè®®**

#### ä¼˜å…ˆçº§æ›´é«˜çš„ä¼˜åŒ–ï¼š

1. **ç§»é™¤æµå¼å“åº”ä¸­çš„ nextTick()** â­â­â­â­
   ```typescript
   // å½“å‰ï¼š
   chatStore.appendTokenToBranchVersion(...)
   await nextTick()  // âŒ ç­‰å¾… Vue é‡æ¸²æŸ“
   throttledScrollToBottom()
   
   // ä¼˜åŒ–åï¼š
   chatStore.appendTokenToBranchVersion(...)
   // âŒ ç§»é™¤ nextTick()
   throttledScrollToBottom()
   ```
   
   **æ”¶ç›Šï¼š**
   - å‡å°‘ 500 æ¬¡ nextTick ç­‰å¾…
   - é¢„è®¡èŠ‚çœ 500-1000ms
   - å®ç°ç®€å•ï¼Œé£é™©ä½

2. **è™šæ‹Ÿæ»šåŠ¨ï¼ˆé•¿å¯¹è¯ 100+ æ¶ˆæ¯æ—¶ï¼‰** â­â­â­â­â­
   - åªæ¸²æŸ“å¯è§†åŒºåŸŸçš„æ¶ˆæ¯
   - ä½¿ç”¨ `vue-virtual-scroller` æˆ–ç±»ä¼¼åº“
   - é•¿å¯¹è¯æ€§èƒ½æå‡ 10-50 å€
   - ä½†éœ€è¦è¾ƒå¤§é‡æ„

3. **æ¶ˆæ¯å†…å®¹å»¶è¿Ÿæ¸²æŸ“ï¼ˆé•¿æ¶ˆæ¯ï¼‰** â­â­â­
   - è¶…è¿‡ 1000 å­—çš„æ¶ˆæ¯åˆå§‹åªæ¸²æŸ“å‰ 500 å­—
   - ç”¨æˆ·æ»šåŠ¨åˆ°æ—¶å†å±•å¼€
   - å‡å°‘åˆå§‹æ¸²æŸ“å¼€é”€

---

## ğŸ“Š æœ€ç»ˆè¯„ä¼°

| ä¼˜åŒ–æ–¹æ¡ˆ | é¢„æœŸæ”¶ç›Š | å®ç°éš¾åº¦ | é£é™© | æ¨èåº¦ |
|---------|---------|---------|------|--------|
| displayMessages ç¼“å­˜ | â­â­ (5-8%) | ğŸ”´ é«˜ | ğŸ”´ é«˜ | âŒ ä¸æ¨è |
| ç§»é™¤ nextTick | â­â­â­â­ (15-25%) | ğŸŸ¢ ä½ | ğŸŸ¡ ä¸­ | âœ… æ¨è |
| è™šæ‹Ÿæ»šåŠ¨ | â­â­â­â­â­ (10-50x) | ğŸ”´ é«˜ | ğŸŸ¡ ä¸­ | âš ï¸ é•¿å¯¹è¯åœºæ™¯æ¨è |
| å†…å®¹å»¶è¿Ÿæ¸²æŸ“ | â­â­â­ (10-20%) | ğŸŸ¡ ä¸­ | ğŸŸ¢ ä½ | âš ï¸ å¯é€‰ |

---

## ğŸ’¡ æœ€ç»ˆå»ºè®®

### ç«‹å³è¡ŒåŠ¨
âœ… **ä¿æŒå½“å‰å®ç°**
- å·²æœ‰çš„ç¼“å­˜æœºåˆ¶è¶³å¤Ÿå¥½
- å·²ä¼˜åŒ–çš„æ»šåŠ¨èŠ‚æµæ•ˆæœæ˜¾è‘—
- æ€§èƒ½å·²ç»è¾¾åˆ°å¯æ¥å—æ°´å¹³

### çŸ­æœŸä¼˜åŒ–ï¼ˆå¦‚æœéœ€è¦ï¼‰
âš ï¸ **è€ƒè™‘ç§»é™¤æµå¼å“åº”ä¸­çš„ nextTick()**
- æ”¶ç›Šæ›´å¤§ï¼ˆ15-25%ï¼‰
- å®ç°ç®€å•ï¼ˆåˆ é™¤ 3 è¡Œä»£ç ï¼‰
- é£é™©å¯æ§ï¼ˆscrollToBottom å†…éƒ¨æœ‰ RAFï¼‰
- éœ€è¦æµ‹è¯•éªŒè¯

### é•¿æœŸä¼˜åŒ–ï¼ˆé•¿å¯¹è¯åœºæ™¯ï¼‰
âš ï¸ **è€ƒè™‘å®æ–½è™šæ‹Ÿæ»šåŠ¨**
- å½“å¯¹è¯è¶…è¿‡ 100 æ¡æ¶ˆæ¯æ—¶
- æ”¶ç›Šå·¨å¤§ï¼ˆ10-50 å€æ€§èƒ½æå‡ï¼‰
- ä½†éœ€è¦è¾ƒå¤§é‡æ„

---

**åˆ†æå®Œæˆæ—¥æœŸ**ï¼š2025å¹´11æœˆ9æ—¥  
**åˆ†æè€…**ï¼šGitHub Copilot  
**ç»“è®º**ï¼šâŒ ä¸æ¨èå®æ–½ displayMessages ç¼“å­˜ä¼˜åŒ–ï¼ˆæ”¶ç›Šä½ã€é£é™©é«˜ï¼‰
